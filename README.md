## ä»€ä¹ˆæ˜¯webpack
å®ƒæ˜¯ä¸€ä¸ªæ¨¡å—æ‰“åŒ…å™¨ï¼Œä¹Ÿå¯ä»¥å¼•ç”¨å®˜ç½‘çš„ä¸€å¹…å›¾è§£é‡Šï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°webpackï¼Œå¯ä»¥åˆ†æå„ä¸ªæ¨¡å—çš„ä¾èµ–å…³ç³»ï¼Œæœ€ç»ˆæ‰“åŒ…æˆæˆ‘ä»¬å¸¸è§çš„é™æ€æ–‡ä»¶ï¼Œ.js ã€ .css ã€ .jpg ã€.pngã€‚ä»Šå¤©æˆ‘ä»¬å…ˆä¸å¼„é‚£ä¹ˆå¤æ‚ï¼Œæˆ‘ä»¬å°±ä»‹ç»webpackæ˜¯æ€ä¹ˆåˆ†æES6çš„æ¨¡å—ä¾èµ–ï¼Œæ€ä¹ˆæŠŠES6çš„ä»£ç è½¬æˆES5çš„ã€‚

![](https://user-gold-cdn.xitu.io/2019/3/2/1693ed9df7905766?w=2124&h=928&f=png&s=153846)

## å®ç°
ç”±äºES6è½¬ES5ä¸­éœ€è¦ç”¨åˆ°babelï¼Œæ‰€ä»¥è¦ç”¨åˆ°ä¸€ä¸‹æ’ä»¶

`npm install @babel/core @babel/parser @babel/traverse @babel/preset-env --save-dev`
### éœ€è¦çš„æ–‡ä»¶
ä½¿ç”¨webpackè‚¯å®šå°‘ä¸äº†åŸæ–‡ä»¶ï¼Œæˆ‘ä»¬ä¼šæ¶‰åŠä¸‰ä¸ªéœ€è¦æ‰“åŒ…çš„jsæ–‡ä»¶ï¼ˆ`entry.js`ã€`message.js`ã€`name.js`ï¼‰

```
// entry.js

import message from './message.js';
console.log(message);
```
```
// message.js

import {name} from './name.js';
export default `hello ${name}!`;
```
```
// name.js

export const name = 'world';
```
``` 
//bundler.js 
// è¯»å–æ–‡ä»¶ä¿¡æ¯ï¼Œå¹¶è·å¾—å½“å‰jsæ–‡ä»¶çš„ä¾èµ–å…³ç³»
function createAsset(filename) {//ä»£ç ç•¥}
// ä»å…¥å£å¼€å§‹åˆ†ææ‰€æœ‰ä¾èµ–é¡¹ï¼Œå½¢æˆä¾èµ–å›¾ï¼Œé‡‡ç”¨å¹¿åº¦éå†
function createGraph(entry) {//ä»£ç ç•¥}
// æ ¹æ®ç”Ÿæˆçš„ä¾èµ–å…³ç³»å›¾ï¼Œç”Ÿæˆæµè§ˆå™¨å¯æ‰§è¡Œæ–‡ä»¶
function bundle(graph) {//ä»£ç ç•¥}
```
`entry.js` å°±æ˜¯æˆ‘ä»¬çš„å…¥å£æ–‡ä»¶ï¼Œæ–‡ä»¶çš„ä¾èµ–å…³ç³»æ˜¯ï¼Œ`entry.js`ä¾èµ–`message.js`ï¼Œ`message.js`ä¾èµ–`name.js`ã€‚

`bundler.js` æ˜¯æˆ‘ä»¬ç®€æ˜“ç‰ˆçš„webpack


ç›®å½•ç»“æ„
```
- example
    - entry.js
    - message.js
    - name.js
- bundler.js
```

### å¦‚ä½•åˆ†æä¾èµ–
webpackåˆ†æä¾èµ–æ˜¯ä»ä¸€ä¸ªå…¥å£æ–‡ä»¶å¼€å§‹åˆ†æçš„ï¼Œå½“æˆ‘ä»¬æŠŠä¸€ä¸ªå…¥å£çš„æ–‡ä»¶è·¯å¾„ä¼ å…¥ï¼Œwebpackå°±ä¼šé€šè¿‡è¿™ä¸ªæ–‡ä»¶çš„è·¯å¾„è¯»å–æ–‡ä»¶çš„ä¿¡æ¯ï¼ˆè¯»å–åˆ°çš„æœ¬è´¨å…¶å®æ˜¯å­—ç¬¦ä¸²ï¼‰ï¼Œç„¶åæŠŠè¯»å–åˆ°çš„ä¿¡æ¯è½¬æˆASTï¼ˆæŠ½è±¡è¯­æ³•æ ‘ï¼‰ï¼Œç®€å•ç‚¹æ¥è¯´å‘¢ï¼Œå°±æ˜¯æŠŠä¸€ä¸ªjsæ–‡ä»¶é‡Œé¢çš„å†…å®¹å­˜åˆ°æŸç§æ•°æ®ç»“æ„é‡Œï¼Œé‡Œé¢åŒ…æ‹¬äº†å„ç§ä¿¡æ¯ï¼Œ**å…¶ä¸­å°±æœ‰å½“å‰æ¨¡å—ä¾èµ–äº†å“ªäº›æ¨¡å—**ã€‚æˆ‘ä»¬æš‚æ—¶æŠŠé€šè¿‡ä¼ **æ–‡ä»¶è·¯å¾„**èƒ½è¿”å›æ–‡ä»¶ä¿¡æ¯çš„è¿™ä¸ªå‡½æ•°å« `createAsset` ã€‚

### `createAsset`è¿”å›ä»€ä¹ˆ
ç¬¬ä¸€æ­¥æˆ‘ä»¬è‚¯å®šéœ€è¦å…ˆä» `entry.js` å¼€å§‹åˆ†æï¼Œäºæ˜¯å°±æœ‰äº†å¦‚ä¸‹çš„ä»£ç ï¼Œæˆ‘ä»¬å…ˆä¸å…³å¿ƒ`createAsset`å…·ä½“ä»£ç æ˜¯æ€ä¹ˆå®ç°çš„ï¼Œå…·ä½“ä»£ç æˆ‘ä¼šæ”¾åœ¨æœ€åã€‚
```
createAsset("./example/entry.js");
```
å½“æ‰§è¡Œè¿™å¥ä»£ç ï¼Œ`createAsset` ä¼šè¿”å›ä¸‹é¢çš„æ•°æ®ç»“æ„ï¼Œè¿™é‡ŒåŒ…æ‹¬äº†**æ¨¡å—çš„id**ï¼Œ**æ–‡ä»¶è·¯å¾„**ï¼Œ**ä¾èµ–æ•°ç»„**ï¼ˆ`entry.js`ä¾èµ–äº†`message.js`ï¼Œæ‰€ä»¥ä¼šè¿”å›ä¾èµ–çš„æ–‡ä»¶åï¼‰ï¼Œ**code**ï¼ˆè¿™ä¸ªå°±æ˜¯`entry.js` ES6è½¬ES5çš„ä»£ç ï¼‰
![](https://user-gold-cdn.xitu.io/2019/3/2/1693eee846b82ac0?w=1482&h=560&f=png&s=101080)
é€šè¿‡ `createAsset` æˆ‘ä»¬æˆåŠŸæ‹¿åˆ°äº†`entry.js`çš„ä¾èµ–ï¼Œå°±æ˜¯ `dependencies` æ•°ç»„ã€‚

### `createGraph`è¿”å›ä»€ä¹ˆï¼Œå¦‚ä½•æ‰¾ä¸‹ä¸€ä¸ªä¾èµ–
æˆ‘ä»¬é€šè¿‡ä¸Šé¢å¯ä»¥æ‹¿åˆ°entry.jsä¾èµ–çš„æ¨¡å—ï¼Œäºæ˜¯æˆ‘ä»¬å°±å¯ä»¥æ¥ç€å»éå†`dependencies` æ•°ç»„ï¼Œå¾ªç¯è°ƒç”¨`createAsset`è¿™æ ·å°±å¯ä»¥å¾—åˆ°å…¨éƒ¨æ¨¡å—ç›¸äº’ä¾èµ–çš„ä¿¡æ¯ã€‚æƒ³å¾—åˆ°å…¨éƒ¨ä¾èµ–ä¿¡æ¯éœ€è¦è°ƒç”¨ `createGraph` è¿™ä¸ªä¸€ä¸ªå‡½æ•°ï¼Œå®ƒä¼šè¿›è¡Œå¹¿åº¦éå†ï¼Œæœ€ç»ˆè¿”å›ä¸‹é¢çš„æ•°æ®

![](https://user-images.githubusercontent.com/15076030/53696618-e8055b80-3e03-11e9-82b6-83b81f5cd82a.png)

æˆ‘ä»¬å¯ä»¥çœ‹åˆ°è¿”å›çš„æ•°æ®ï¼Œå­—æ®µä¹‹å‰éƒ½å’Œå¤§å®¶è§£é‡Šäº†ï¼Œé™¤äº† `mapping`ï¼Œ`mapping`è¿™ä¸ªå­—æ®µæ˜¯æŠŠå½“å‰æ¨¡å—ä¾èµ–çš„**æ–‡ä»¶åç§°** å’Œ æ¨¡å—çš„id åšä¸€ä¸ªæ˜ å°„ï¼Œç›®çš„æ˜¯ä¸ºäº†æ›´æ–¹ä¾¿æŸ¥æ‰¾æ¨¡å—ã€‚

### `bundle`è¿”å›ä»€ä¹ˆ && æœ€åæ­¥éª¤
æˆ‘ä»¬ç°åœ¨å·²ç»èƒ½æ‹¿åˆ°æ¯ä¸ªæ¨¡å—ä¹‹å‰çš„ä¾èµ–å…³ç³»ï¼Œæˆ‘ä»¬å†é€šè¿‡è°ƒç”¨`bundle`å‡½æ•°ï¼Œæˆ‘ä»¬å°±èƒ½æ„é€ å‡ºæœ€åçš„`bundle.js`ï¼Œè¾“å‡ºå¦‚ä¸‹å›¾

![](https://user-images.githubusercontent.com/15076030/53690721-1efb5300-3dab-11e9-9f9b-b4ef4c0691da.png)


### æºç 
[ç‚¹å‡»æŸ¥çœ‹æºç ](https://github.com/dykily/simple_webpack/blob/master/bundler.js)
## æœ€å
æ–‡ç« å¯èƒ½æœ‰ä¸è¶³çš„åœ°æ–¹ï¼Œè¯·å¤§å®¶è§è°…ï¼Œå¦‚æœæœ‰ä»€ä¹ˆç–‘é—®å¯ä»¥ä¸‹æ–¹ç•™è¨€è®¨è®ºã€‚

å¦‚æœå¤§å®¶å¯¹æ–‡å­—æè¿°è¿˜æ˜¯ä¸å¤ªæ¸…æ¥šï¼Œå»ºè®®çœ‹æˆ‘ä¸‹æ–¹æä¾›çš„è§†é¢‘ï¼Œæˆ‘å°±æ˜¯ä»è§†é¢‘ä¸­å­¦çš„ï¼Œè¿™ä¸ªæ˜¯åœ¨youtubeä¸Šçš„è§†é¢‘ï¼Œå¤§å®¶æ‡‚çš„ï¼Œæœ‰æ¡ä»¶çš„è¿˜æ˜¯å»ºè®®çœ‹ä¸€ä¸‹ã€‚ğŸ˜

[å®˜æ–¹40åˆ†é’Ÿæ•™ä½ å†™webpack](https://www.youtube.com/watch?v=Gc9-7PBqOC8&list=LLHK1mTHpwrUeYgF5gu-Kd4g)
